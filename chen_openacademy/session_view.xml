<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <!-- session's form view -->
    	<record model="ir.ui.view" id="session_form_view">
    		<field name="name">session.form</field>
    		<field name="model">openacademy.session</field>
    		<field name="arch" type="xml">
    			<form string="Session Form">
                    <group colspan="2" col="2">
                        <separator string="General" colspan="2" />
                        <field name="course_id" />
                        <field name="name" />
                        <field name="instructor_id" />
                    </group>
                    <group colspan="2" col="2">
                        <separator string="Schedule" colspan="2" />
                        <field name="start_date" />
                        <field name="duration" />
                        <field name="seats" on_change="onchange_taken_seats(seats, attendee_ids)" />
                        <field name="taken_seats_percent" widget="progressbar" />
                    </group>
                    <separator string="Attendees" colspan="4" />
                    <field name="attendee_ids" colspan="4" nolabel="1"
                           on_change="onchange_taken_seats(seats, attendee_ids)">
                        <tree string="" editable="bottom">
                            <field name="partner_id" />
                        </tree>
                    </field>
                    <field name="state" />
                    <group>
                        <button string="Confirm" type="object" name="action_confirm"
                            states="draft" />
                        <button string="Mark as done" type="object" name="action_done"
                            states="confirmed" />
                        <button string="Reset to draft" type="object" name="action_draft"
                            states="confirmed,done" />
                    </group>
    			</form>
    		</field>
    	</record>
        <!--   session's tree/list view -->
        <record model="ir.ui.view" id="session_tree_view">
            <field name="name">session.tree</field>
            <field name="model">openacademy.session</field>
            <field name="arch" type="xml">
                <!--Colors are separated by semi-colons ';' and look like this:
                    colorValue!:condition1;colorValue2:condition2;...
            -->
                <tree string="Session Tree"
                    colors="#0000ff:duration&lt;5;red:duration&gt;15">
                    <field name="name" />
                    <field name="course_id" />
                    <field name="duration" invisible="1" />
                    <field name="taken_seats_percent" widget="progressbar" />
                </tree>
            </field>
        </record>
        <!-- session's calendar view -->
        <record model="ir.ui.view" id="session_calendar_view">
            <field name="name">session.calendar</field>
            <field name="model">openacademy.session</field>
            <field name="type">calendar</field>
            <field name="arch" type="xml">
                <calendar string="Session Calendar"
                    date_start="start_date"
                    date_delay="duration"
                    day_length="1"
                    color="instructor_id">
                    <field name="name" />
                </calendar>
            </field>
        </record>
        <!-- session's Gantt Charts view -->
        <record model="ir.ui.view" id="session_gantt">
            <field name="name">session.gantt</field>
            <field name="model">openacademy.session</field>
            <field name="type">gantt</field>
            <field name="arch" type="xml">
                <gantt string="Session Gantt" date_start="start_date"
                       date_delay="duration" day_length="1" color="course_id">
                    <level object="res.partner" link="instructor_id">
                        <field name="name" />
                    </level>
                </gantt>
            </field>
        </record>
        <!--session's graph view-->
        <record model="ir.ui.view" id="openacadeny_session_graph_view">
            <field name="name">openacademy.session.graph</field>
            <field name="model">openacademy.session</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph string="Participations by Courses" type="bar">
                    <field name="course_id" />
                    <field name="attendee_count" operator="+" />
                </graph>
            </field>
        </record>
        <record model="ir.actions.act_window" id="session_list_action">
            <field name="name">sessions</field>
            <field name="res_model">openacademy.session</field>
            <field name='view_type'>form</field>
            <field name="view_mode">tree,form,calendar,gantt</field>
        </record>
        <menuitem id="openacademy_session_menu" name="sessions" parent="openacademy_menu_main" action="session_list_action"/>
    </data>
</openerp>
